zerops:
  - setup: prod
    build:
      base: rust@latest
      buildCommands:
        - cargo build --release
      deployFiles:
        - target/release/rust-hello-world-app
    run:
      base: rust@latest
      ports:
        - port: 3000
          httpSupport: true
      # Pointing directly to the binary location inside the target folder
      start: ./target/release/rust-hello-world-app

  - setup: dev
    build:
      base: rust@latest
      buildCommands:
        - cargo build
      deployFiles:
        - target/debug/rust-hello-world-app
        - src
        - Cargo.toml
        - Cargo.lock
    run:
      base: rust@latest
      ports:
        - port: 3000
          httpSupport: true
      envVariables:
        RUST_BACKTRACE: "1"
      # Pointing directly to the debug binary
      start: ./target/debug/rust-hello-world-app